name: MAIN

on:
  push:
    branches: [main, dispatch]
  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Emit repository_dispatch
        uses: mvasigh/dispatch-action@main
        with:
          # You should create a personal access token and store it in your repository
          token: ${{ secrets.GH_PAT }}
          repo: iasql-on-iasql
          owner: iasql
          event_type: deploy_staging