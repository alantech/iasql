"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[73602],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>y});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=r.createContext({}),l=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=l(n),d=o,y=u["".concat(c,".").concat(d)]||u[d]||m[d]||a;return n?r.createElement(y,i(i({ref:t},p),{},{components:n})):r.createElement(y,i({ref:t},p))}));function y(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=d;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[u]="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6545:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>m,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var r=n(87462),o=(n(67294),n(3905));const a={slug:"save-s3-vpc",title:"Save $ on public S3 buckets using VPC endpoints via SQL",authors:["yrobla","depombo"],date:new Date("2023-03-06T00:00:00.000Z"),tags:["tutorial"]},i=void 0,s={permalink:"/blog/save-s3-vpc",editUrl:"https://github.com/alantech/iasql/tree/main/site/blog/tutorials/optimize-s3-endpoints.mdx",source:"@site/blog/tutorials/optimize-s3-endpoints.mdx",title:"Save $ on public S3 buckets using VPC endpoints via SQL",description:"Are you using S3 buckets as part of your cloud deployments? How are you accessing them?",date:"2023-03-06T00:00:00.000Z",formattedDate:"March 6, 2023",tags:[{label:"tutorial",permalink:"/blog/tags/tutorial"}],readingTime:6.76,hasTruncateMarker:!0,authors:[{name:"Yolanda Robla",imageURL:"https://github.com/yrobla.png",key:"yrobla"},{name:"L. Fernando De Pombo",imageURL:"https://github.com/depombo.png",key:"depombo"}],frontMatter:{slug:"save-s3-vpc",title:"Save $ on public S3 buckets using VPC endpoints via SQL",authors:["yrobla","depombo"],date:"2023-03-06T00:00:00.000Z",tags:["tutorial"]},prevItem:{title:"Deploy Stable Diffusion in EC2 using a SQL query",permalink:"/blog/deploy-stable-diffusion"},nextItem:{title:"Securely connect to an Amazon RDS via PrivateLink using SQL",permalink:"/blog/rds-privatelink"}},c={authorsImageUrls:[void 0,void 0]},l=[],p={toc:l},u="wrapper";function m(e){let{components:t,...n}=e;return(0,o.kt)(u,(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Are you using S3 buckets as part of your cloud deployments? How are you accessing them?"),(0,o.kt)("p",null,"When running applications behind VPCs without public access, there may be the need to access S3 buckets from the private subnet over the public internet.\nOne simple but costly way to do so is to rely on ",(0,o.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/en_en/vpc/latest/userguide/vpc-nat-gateway.html"},"NAT gateways"),"."),(0,o.kt)("img",{src:"/img/optimize-s3-endpoints/s3_nat_gateway.png",style:{maxWidth:400}}),(0,o.kt)("p",null,"However, creating ",(0,o.kt)("a",{parentName:"p",href:"https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints-s3.html"},"gateway or interface VPC endpoints")," for each region where your buckets are exposed is a more optimal solution."),(0,o.kt)("img",{src:"/img/optimize-s3-endpoints/s3_privatelink.png",style:{maxWidth:600}}),(0,o.kt)("p",null,"When the VPC endpoints are enabled you can access your S3 buckets using this endpoint. In this post, we will walk you through how to control your buckets from an internal network with the desired security, and without the extra costs of a NAT gateway using a VPC endpoint and IaSQL. IaSQL is an ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/iasql/iasql"},"open-source")," software tool that creates a two-way connection between an unmodified PostgreSQL database and an AWS account so you can manage your infrastructure from a database."))}m.isMDXComponent=!0}}]);